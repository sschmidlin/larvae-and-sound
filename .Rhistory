View(data)
View(data)
data <- read.csv2(file="sound_data.csv", head=TRUE, sep=",")
colnames(data)[1]<- "date"
data <- data[, 1:7]
data <- data[1:100,]
data$tank <- as.factor(data$tank)
data$date <- as.factor(data$date)
data$speaker <- as.factor(data$speaker)
data$cup_position <- as.factor(data$cup_position)
# Calculate response variable from input data, adding binary data settled =1 not-settled = 0
mult_s <- rep(1:nrow(data), data[, 'settled'])
mult_u <- rep(1:nrow(data), data[, 'unsettled'])
data_s <- data[mult_s,]
data_s[, 'settled'] <- 1
data_s <- data_s[, !(names(data_s) %in% c('unsettled'))]
data_u <- data[mult_u,]
data_u[, 'unsettled'] <- 0
data_u <- data_u[, !(names(data_u) %in% c('settled'))]
colnames(data_u)[5] <- 'settled'
data <- rbind(data_s, data_u)
model_date <-glmer(settled ~ date + (1 | treatment), data = data, family = binomial)
#adding cup position as fixed effect
data_batch2 <- subset(data, date == "4-Mar")
data_batch3 <- subset(data, date == "5-Mar")
data_batch4 <- subset(data, date == "7-Mar")
data_batch234 <- rbind(data_batch2, data_batch3, data_batch4)
library(Matrix)
library(lme4)
library(ggeffects)
# removing boat sounds
data_noboat <- subset(data, treatment == "off reef", "healthy reef", "no sound")
# removing boat sounds
data_noboat <- subset(data, treatment == "off reef")
# removing boat sounds
data_noboat1 <- subset(data, treatment == "off reef")
data_noboat2 <- subset(data, treatment == "healthy reef")
data_noboat3 <- subset(data, treatment == "no sound")
data_noboat <- rbind(data_noboat1, data_noboat2, data_noboat3)
View(data_noboat)
View(data_noboat)
model_noboat <-glmer(settled ~ treatment + (1 | tank) + (1 | speaker), data = data_noboat, family = binomial)
model_noboat <-glmer(settled ~ treatment + (1 | tank), data = data_noboat, family = binomial)
car::Anova(model_noboat, type=2)
marginal_noboat <-lsmeans(model_noboat, ~ treatment)
library(lsmeans)
library(emmeans)
library(lsmeans)
marginal_noboat <-lsmeans(model_noboat, ~ treatment)
pairs(marginal_noboat, adjust="tukey")
pairs(marginal_noboat, adjust="tukey")
#checking for an effect of date on no boats
model_noboat_date <-glmer(settled ~ date + (1 | treatment), data = data_noboat, family = binomial)
car::Anova(model_noboat_date, type=2)
marginal_noboat_date <-lsmeans(model_noboat_date, ~ date)
pairs(marginal_noboat_date, adjust="tukey")
#checking for an effect of date on no boats
model_noboat_date <-glmer(settled ~ date + (1 | tank), data = data_noboat, family = binomial)
car::Anova(model_noboat_date, type=2)
marginal_noboat_date <-lsmeans(model_noboat_date, ~ date)
pairs(marginal_noboat_date, adjust="tukey")
model_noboat <-glmer(settled ~ treatment + (1 | tank), data = data_noboat, family = binomial)
model_noboat <-glmer(settled ~ treatment + (1 | tank), (1| date), data = data_noboat, family = binomial)
model_noboat <-glmer(settled ~ treatment + (1 | tank) + (1| date), data = data_noboat, family = binomial)
car::Anova(model_noboat, type=2)
marginal_noboat <-lsmeans(model_noboat, ~ treatment)
pairs(marginal_noboat, adjust="tukey")
model_noboat <-glmer(settled ~ treatment + (1| speaker) + (1 | tank) + (1| date), data = data_noboat, family = binomial)
model_noboat <-glmer(settled ~ treatment + (1 | tank) + (1| date), data = data_noboat, family = binomial)
model_noboat <-glmer(settled ~ treatment + (1| date), data = data_noboat, family = binomial)
car::Anova(model_noboat, type=2)
marginal_noboat <-lsmeans(model_noboat, ~ treatment)
pairs(marginal_noboat, adjust="tukey")
#checking for an effect of date on data without boats
model_noboat_date <-glmer(settled ~ date + (1 | tank) + (1| treatment), data = data_noboat, family = binomial)
car::Anova(model_noboat_date, type=2)
marginal_noboat_date <-lsmeans(model_noboat_date, ~ date)
pairs(marginal_noboat_date, adjust="tukey")
#checking for an effect of date on data without boats
model_noboat_date <-glmer(settled ~ date + (1 | tank), data = data_noboat, family = binomial)
car::Anova(model_noboat_date, type=2)
marginal_noboat_date <-lsmeans(model_noboat_date, ~ date)
pairs(marginal_noboat_date, adjust="tukey")
model_date <-glmer(settled ~ date + (1 | treatment), data = data, family = binomial)
car::Anova(model_date, type=2)
marginal_date <-lsmeans(model_date, ~date)
pairs(marginal_date, adjust="tukey")
model_date <-glmer(settled ~ date + (1 | tank), data = data, family = binomial)
model_date <-glmer(settled ~ date + (1 | speaker), data = data, family = binomial)
car::Anova(model_date, type=2)
marginal_date <-lsmeans(model_date, ~date)
pairs(marginal_date, adjust="tukey")
model_date <-glmer(settled ~ date + (1 | tank), data = data, family = binomial)
car::Anova(model_date, type=2)
marginal_date <-lsmeans(model_date, ~date)
pairs(marginal_date, adjust="tukey")
model_date <-glmer(settled ~ date + (1 | treatment), data = data, family = binomial)
car::Anova(model_date, type=2)
marginal_date <-lsmeans(model_date, ~date)
pairs(marginal_date, adjust="tukey")
#checking for an effect of date on data without boats
model_noboat_date <-glmer(settled ~ date + (1 | tank), data = data_noboat, family = binomial)
car::Anova(model_noboat_date, type=2)
#checking for an effect of date on data without boats
model_noboat_date <-glmer(settled ~ date + (1 | treatment), data = data_noboat, family = binomial)
car::Anova(model_noboat_date, type=2)
marginal_noboat_date <-lsmeans(model_noboat_date, ~ date)
pairs(marginal_noboat_date, adjust="tukey")
#checking for an effect of date on data without boats
model_noboat_date <-glmer(settled ~ date + (1 | tank), data = data_noboat, family = binomial)
car::Anova(model_noboat_date, type=2)
marginal_noboat_date <-lsmeans(model_noboat_date, ~ date)
pairs(marginal_noboat_date, adjust="tukey")
#checking for an effect of date on data without boats
model_noboat_date <-glmer(settled ~ date + (1 | speaker), data = data_noboat, family = binomial)
car::Anova(model_noboat_date, type=2)
marginal_noboat_date <-lsmeans(model_noboat_date, ~ date)
pairs(marginal_noboat_date, adjust="tukey")
#checking for an effect of date on data without boats
model_noboat_date <-glmer(settled ~ date + (1 | treatment), data = data_noboat, family = binomial)
car::Anova(model_noboat_date, type=2)
marginal_noboat_date <-lsmeans(model_noboat_date, ~ date)
pairs(marginal_noboat_date, adjust="tukey")
#only boats
data_boat1 <- subset(data, treatment == "boat")
data_boat2 <- subset(data, treatment == "boat + reef")
data_boat <- rbind(data_boat1, data_boat2)
model_boat <-glmer(settled ~ treatment + (1| date), data = data_boat, family = binomial)
car::Anova(model_boat, type=2)
marginal_boat <-lsmeans(model_boat, ~ treatment)
pairs(marginal_boat, adjust="tukey")
model_boat_date <-glmer(settled ~ date + (1| treatment), data = data_boat, family = binomial)
car::Anova(model_boat_date, type=2)
marginal_boat_date <-lsmeans(model_boat_date, ~ date)
pairs(marginal_boat_date, adjust="tukey")
m <- ggpredict(model_noboat_date, terms = c("date"))
plot(m)+
labs(x = 'Treatment',
y= 'Larvae Settled (%)',
title = "")
plot(m)+
labs(x = 'Date',
y= 'Larvae Settled (%)',
title = "")
plot(m)+
labs(x = 'Boats',
y= 'Larvae Settled (%)',
title = "")
model_boat_date <-glmer(settled ~ date + (1| tank), data = data_boat, family = binomial)
car::Anova(model_boat_date, type=2)
marginal_boat_date <-lsmeans(model_boat_date, ~ date)
pairs(marginal_boat_date, adjust="tukey")
pairs(marginal_boat_date, adjust="tukey")
m <- ggpredict(model_noboat_date, terms = c("date"))
plot(m)+
labs(x = 'Boats',
y= 'Larvae Settled (%)',
title = "")
m <- ggpredict(model_noboat_date, terms = c("date"))
model_boat_date <-glmer(settled ~ date + (1| treatment), data = data_boat, family = binomial)
model_boat_date <-glmer(settled ~ date + (1| treatment), data = data_boat, family = binomial)
car::Anova(model_boat_date, type=2)
marginal_boat_date <-lsmeans(model_boat_date, ~ date)
pairs(marginal_boat_date, adjust="tukey")
marginal_boat_date <-lsmeans(model_boat_date, ~ date)
pairs(marginal_boat_date, adjust="tukey")
#only boat sounds
model_boat1 <-glmer(settled ~ date + (1| tank), data = data_boat1, family = binomial)
#only boat sounds
model_boat1 <-glmer(settled ~ date + (1| speaker), data = data_boat1, family = binomial)
car::Anova(model_boat1, type=2)
marginal_boat1 <-lsmeans(model_boat1, ~ date)
pairs(marginal_boat1, adjust="tukey")
m <- ggpredict(model_boat_date, terms = c("date"))
plot(m)+
labs(x = 'Boats',
y= 'Larvae Settled (%)',
title = "")
#only boat sounds no "boat + reef"
model_boat1 <-glmer(settled ~ date + (1| speaker), data = data_boat1, family = binomial)
car::Anova(model_boat1, type=2)
marginal_boat1 <-lsmeans(model_boat1, ~ date)
pairs(marginal_boat1, adjust="tukey")
m <- ggpredict(model_boat1, terms = c("date"))
plot(m)+
labs(x = 'Boats',
y= 'Larvae Settled (%)',
title = "")
#only boat sounds no "boat + reef"
model_boat1 <-glmer(settled ~ date + (1| tank), data = data_boat1, family = binomial)
car::Anova(model_boat1, type=2)
marginal_boat1 <-lsmeans(model_boat1, ~ date)
pairs(marginal_boat1, adjust="tukey")
m <- ggpredict(model_boat1, terms = c("date"))
plot(m)+
labs(x = 'Boats',
y= 'Larvae Settled (%)',
title = "")
model_healthy <-data_healthy <- subset(data, treatment == "healthy")
#only healthy reefs
data_healthy <- subset(data, treatment == "healthy")
model_healthy <- glmer(settled ~ date + (1| tank), data = data_healthy, family = binomial)
model_healthy <- glmer(settled ~ date + (1| speaker), data = data_healthy, family = binomial)
View(data_healthy)
View(data_healthy)
#only healthy reefs
data_healthy <- subset(data, treatment == "healthy")
View(data_boat2)
View(data_healthy)
View(data_healthy)
#only healthy reefs
data_healthy <- subset(data, treatment == "healthy reefs")
model_healthy <- glmer(settled ~ date + (1| speaker), data = data_healthy, family = binomial)
View(data_healthy)
View(data_healthy)
#only healthy reefs
data_healthy <- subset(data, treatment == "healthy reef")
model_healthy <- glmer(settled ~ date + (1| speaker), data = data_healthy, family = binomial)
#only healthy reef sound over date
data_healthy <- subset(data, treatment == "healthy reef")
model_healthy <- glmer(settled ~ date + (1| speaker), data = data_healthy, family = binomial)
car::Anova(model_healthy, type=2)
marginal_healthy <-lsmeans(model_healthy, ~ date)
pairs(marginal_healthy, adjust="tukey")
#loading data
data <- read.csv2(file="sound_data.csv", head=TRUE, sep=",")
colnames(data)[1]<- "date"
data <- data[, 1:7]
data <- data[1:100,]
data$tank <- as.factor(data$tank)
data$date <- as.factor(data$date)
data$speaker <- as.factor(data$speaker)
data$cup_position <- as.factor(data$cup_position)
# Calculate response variable from input data, adding binary data settled =1 not-settled = 0
mult_s <- rep(1:nrow(data), data[, 'settled'])
mult_u <- rep(1:nrow(data), data[, 'unsettled'])
data_s <- data[mult_s,]
data_s[, 'settled'] <- 1
data_s <- data_s[, !(names(data_s) %in% c('unsettled'))]
data_u <- data[mult_u,]
data_u[, 'unsettled'] <- 0
data_u <- data_u[, !(names(data_u) %in% c('settled'))]
colnames(data_u)[5] <- 'settled'
data <- rbind(data_s, data_u)
# GLM
model <-glmer(settled ~ treatment + (1 | date), data = data, family = binomial)
car::Anova(model, type=2)
#post hoc
marginal <-lsmeans(model, ~treatment)
pairs(marginal, adjust="tukey")
#checking for an effect from random variables
#adding date as a fixed effect
model_date <-glmer(settled ~ date + (1 | treatment), data = data, family = binomial)
car::Anova(model_date, type=2)
marginal_date <-lsmeans(model_date, ~date)
pairs(marginal_date, adjust="tukey")
#adding tank as a fixed effect
model_tank <-glmer(settled ~ tank + (1 | treatment) + (1 | speaker) + (1 | date), data = data, family = binomial)
car::Anova(model_tank, type=2)
marginal_tank <-lsmeans(model_tank, ~ tank)
pairs(marginal_tank, adjust="tukey")
#adding speaker as a fixed effect
model_speaker <-glmer(settled ~ speaker + (1 | treatment) + (1 | tank) + (1 | date), data = data, family = binomial)
car::Anova(model_speaker, type=2)
marginal_speaker <-lsmeans(model_speaker, ~ speaker)
pairs(marginal_speaker, adjust="tukey")
#adding cup position as fixed effect
#only batches 2,3,4 were used in this because we didn't record cup position for the first day of the experiment
data_batch2 <- subset(data, date == "4-Mar")
data_batch3 <- subset(data, date == "5-Mar")
data_batch4 <- subset(data, date == "7-Mar")
data_batch234 <- rbind(data_batch2, data_batch3, data_batch4)
model_cup <-glmer(settled ~ cup_position + (1 | treatment) + (1 | tank) + (1 | date), data = data_batch234, family = binomial)
car::Anova(model_cup, type=2)
marginal_cup <-lsmeans(model_cup, ~ cup_position)
pairs(marginal_cup, adjust="tukey")
#prediction plot
m <- ggpredict(model, terms = c("treatment"))
plot(m)+
labs(x = 'Treatment',
y= 'Larvae Settled (%)',
title = "")
#only healthy reef sound over date
data_healthy <- subset(data, treatment == "healthy reef")
model_healthy <- glmer(settled ~ date + (1| speaker), data = data_healthy, family = binomial)
car::Anova(model_healthy, type=2)
marginal_healthy <-lsmeans(model_healthy, ~ date)
pairs(marginal_healthy, adjust="tukey")
plot(m2)+
labs(x = 'healthy',
y= 'Larvae Settled (%)',
title = "")
m2 <- ggpredict(model_healthy, terms = c("date"))
plot(m2)+
labs(x = 'healthy',
y= 'Larvae Settled (%)',
title = "")
model_off <- glmer(settled ~ date + (1| speaker) + (1 | tank), data = data_off, family = binomial)
#only off reef sound over date
data_off <- subset(data, treatment == "off reef")
model_off <- glmer(settled ~ date + (1| speaker) + (1 | tank), data = data_off, family = binomial)
car::Anova(model_off, type=2)
marginal_healthy <-lsmeans(model_off, ~ date)
pairs(marginal_healthy, adjust="tukey")
car::Anova(model_off, type=2)
marginal_off <-lsmeans(model_off, ~ date)
pairs(marginal_off, adjust="tukey")
m3 <- ggpredict(model_off, terms = c("date"))
plot(m3)+
labs(x = 'off',
y= 'Larvae Settled (%)',
title = "")
plot(m3)+
labs(x = 'off reef',
y= 'Larvae Settled (%)',
title = "")
model_healthy <- glmer(settled ~ date + (1| speaker) + (1| tank), data = data_healthy, family = binomial)
car::Anova(model_healthy, type=2)
marginal_healthy <-lsmeans(model_healthy, ~ date)
pairs(marginal_healthy, adjust="tukey")
m2 <- ggpredict(model_healthy, terms = c("date"))
plot(m2)+
labs(x = 'healthy',
y= 'Larvae Settled (%)',
title = "")
#loading data
data <- read.csv2(file="sound_data.csv", head=TRUE, sep=",")
colnames(data)[1]<- "date"
data <- data[, 1:7]
data <- data[1:100,]
data$tank <- as.factor(data$tank)
data$date <- as.factor(data$date)
data$speaker <- as.factor(data$speaker)
data$cup_position <- as.factor(data$cup_position)
# Calculate response variable from input data, adding binary data settled =1 not-settled = 0
mult_s <- rep(1:nrow(data), data[, 'settled'])
mult_u <- rep(1:nrow(data), data[, 'unsettled'])
data_s <- data[mult_s,]
data_s[, 'settled'] <- 1
data_s <- data_s[, !(names(data_s) %in% c('unsettled'))]
data_u <- data[mult_u,]
data_u[, 'unsettled'] <- 0
data_u <- data_u[, !(names(data_u) %in% c('settled'))]
colnames(data_u)[5] <- 'settled'
data <- rbind(data_s, data_u)
# GLM
model <-glmer(settled ~ treatment + (1 | date), data = data, family = binomial)
car::Anova(model, type=2)
#post hoc
marginal <-lsmeans(model, ~treatment)
pairs(marginal, adjust="tukey")
#adding tank as a fixed effect
model_tank <-glmer(settled ~ tank + (1 | treatment) + (1 | speaker) + (1 | date), data = data, family = binomial)
car::Anova(model_tank, type=2)
marginal_tank <-lsmeans(model_tank, ~ tank)
pairs(marginal_tank, adjust="tukey")
# GLM
model <-glmer(settled ~ treatment + (1 | date), data = data, family = binomial)
car::Anova(model, type=2)
# GLM
model <-glmer(settled ~ treatment + (1 | date) + (1| tank), data = data, family = binomial)
# GLM
model <-glmer(settled ~ treatment + (1 | date), data = data, family = binomial)
car::Anova(model, type=2)
# GLM
model <-glmer(settled ~ treatment + date, data = data, family = binomial)
# GLM
model <-glm(settled ~ treatment + date, data = data, family = binomial)
car::Anova(model, type=2)
#post hoc
marginal <-lsmeans(model, ~treatment)
pairs(marginal, adjust="tukey")
# GLM
model <-glmer(settled ~ treatment + (1| date), data = data, family = binomial)
car::Anova(model, type=2)
#post hoc
marginal <-lsmeans(model, ~treatment)
pairs(marginal, adjust="tukey")
View(data)
View(data)
model <-glm(settled ~ treatment + date + tank + speaker, data = data, family = binomial)
car::Anova(model, type=2)
model <-glmer(settled ~ treatment + date + tank + (1|speaker) , data = data, family = binomial)
model <-glmer(settled ~ treatment + date + (1|speaker) , data = data, family = binomial)
str(data$setteld)
str(data$settled)
data$settled <- ifelse(data$settled == "", 1,0)
table(data#settled)
table(data$settled)
unique(data$settled)
View(data)
View(data)
#loading data
data <- read.csv2(file="sound_data.csv", head=TRUE, sep=",")
colnames(data)[1]<- "date"
data <- data[, 1:7]
data <- data[1:100,]
data$tank <- as.factor(data$tank)
data$date <- as.factor(data$date)
data$speaker <- as.factor(data$speaker)
data$cup_position <- as.factor(data$cup_position)
str(data$settled)
# Calculate response variable from input data, adding binary data settled =1 not-settled = 0
mult_s <- rep(1:nrow(data), data[, 'settled'])
mult_u <- rep(1:nrow(data), data[, 'unsettled'])
data_s <- data[mult_s,]
data_s[, 'settled'] <- 1
data_s <- data_s[, !(names(data_s) %in% c('unsettled'))]
data_u <- data[mult_u,]
data_u[, 'unsettled'] <- 0
data_u <- data_u[, !(names(data_u) %in% c('settled'))]
colnames(data_u)[5] <- 'settled'
data <- rbind(data_s, data_u)
table(data$settled)
tabel(data$date, data$settled)
table(data$date, data$settled)
tabel(data$speaker, data$settled)
table(data$speaker, data$settled)
table(data$speaker, data$treatment)
model <-glm(settled ~ treatment + date + tank + speaker, data = data, family = binomial)
car::Anova(model, type=2)
#post hoc
marginal <-lsmeans(model, ~treatment)
pairs(marginal, adjust="tukey")
table(data$settled, data$treatment)
model <-glm(settled ~ . data = data, family = binomial)
model <-glm(settled ~ ., data = data, family = binomial)
car::Anova(model, type=2)
#post hoc
marginal <-lsmeans(model, ~treatment)
pairs(marginal, adjust="tukey")
summary(model)
table(data$date)
model <-glm(settled ~ ., data = data, family = binomial)
summary(model)
type(data$date)
str(data$date)
unique(data$date)
data$date <- as.character(data$date)
table(data$date)
unique(data$date)
model <-glm(settled ~ ., data = data, family = binomial)
summary(model)
str(data$treatment)
ifelse(data$speaker == "x", 0, data$speaker)
data$speaker <- ifelse(data$speaker == "x", 0, data$speaker)
model <-glm(settled ~ ., data = data, family = binomial)
table(data$speaker)
#loading data
data <- read.csv2(file="sound_data.csv", head=TRUE, sep=",")
colnames(data)[1]<- "date"
data <- data[, 1:7]
data <- data[1:100,]
data$tank <- as.factor(data$tank)
data$date <- as.factor(data$date)
data$speaker <- as.factor(data$speaker)
data$cup_position <- as.factor(data$cup_position)
data$date <- as.character(data$date)
table(data$speaker)
data$speaker <- ifelse(data$speaker == "x", "0", data$speaker)
table(data$speaker)
str(data$speaker)
unique(data$speaker)
#loading data
data <- read.csv2(file="sound_data.csv", head=TRUE, sep=",")
data$speaker <- ifelse(data$speaker == "5", "0", data$speaker)
table(data$speaker)
data$speaker <- ifelse(data$speaker == "x", "0", data$speaker)
table(data$speaker)
model <-glm(settled ~ ., data = data, family = binomial)
colnames(data)[1]<- "date"
data <- data[, 1:7]
data <- data[1:100,]
data$tank <- as.factor(data$tank)
data$date <- as.factor(data$date)
data$speaker <- as.factor(data$speaker)
data$cup_position <- as.factor(data$cup_position)
data$date <- as.character(data$date)
# Calculate response variable from input data, adding binary data settled =1 not-settled = 0
mult_s <- rep(1:nrow(data), data[, 'settled'])
mult_u <- rep(1:nrow(data), data[, 'unsettled'])
data_s <- data[mult_s,]
data_s[, 'settled'] <- 1
data_s <- data_s[, !(names(data_s) %in% c('unsettled'))]
data_u <- data[mult_u,]
data_u[, 'unsettled'] <- 0
data_u <- data_u[, !(names(data_u) %in% c('settled'))]
colnames(data_u)[5] <- 'settled'
data <- rbind(data_s, data_u)
model <-glm(settled ~ ., data = data, family = binomial)
summary(model)
model3 <-glm(settled ~ treatment + date + tank + speaker, data = data, family = binomial)
summary(model3)
library(tidyverse)
data %>% filter(speaker == 0 or speaker == 4) %>% group_by(settled, tank)
data %>% filter(speaker == "0" | speaker == "4") %>% group_by(settled, tank)
data %>% filter(speaker == "0" | speaker == "4") %>% group_by(settled, tank, speaker) %>% summary(N)
data %>% filter(speaker == "0" | speaker == "4") %>% group_by(settled, tank, speaker) %>% summary(m)
data %>% filter(speaker == "0" | speaker == "4") %>% group_by(settled, tank, speaker) %>% summary(n)
data %>% filter(speaker == "0" | speaker == "4") %>% group_by(settled, tank, speaker) %>% summary(n=n)
data %>% filter(speaker == "0" | speaker == "4") %>% group_by(settled, tank, speaker) %>% table()
#data2
data2 <- data
data2 <- data %>% filter(speaker == "0" | "speaker == 4") %>% group_by(speaker,settled,tank)
data2 <- data %>% filter(speaker == "0" | speaker == "4") %>% group_by(speaker,settled,tank)
View(data2)
View(data2)
summary(model3)
model3 <-glm(settled ~ treatment + date + tank, data = data, family = binomial)
car::Anova(model3, type=2)
summary(model3)
str(data$settled)
